import { PrismaClient } from '@prisma/client'
import bcrypt from 'bcryptjs'

const prisma = new PrismaClient()

async function main() {
  console.log('üå± Starting database seed...')

  // Create categories
  const categories = await Promise.all([
    prisma.category.upsert({
      where: { name: 'Ki≈üi Parf√ºml…ôri' },
      update: {},
      create: {
        name: 'Ki≈üi Parf√ºml…ôri',
        description: 'Ki≈üil…ôr √º√ß√ºn n…ôz…ôrd…ô tutulmu≈ü parf√ºml…ôr',
        image: 'https://images.unsplash.com/photo-1592945403244-b3faa74b2c9a?w=400&h=400&fit=crop'
      }
    }),
    prisma.category.upsert({
      where: { name: 'Qadƒ±n Parf√ºml…ôri' },
      update: {},
      create: {
        name: 'Qadƒ±n Parf√ºml…ôri',
        description: 'Qadƒ±nlar √º√ß√ºn n…ôz…ôrd…ô tutulmu≈ü parf√ºml…ôr',
        image: 'https://images.unsplash.com/photo-1588405748880-12d1d1a6f6a9?w=400&h=400&fit=crop'
      }
    }),
    prisma.category.upsert({
      where: { name: 'Unisex Parf√ºml…ôr' },
      update: {},
      create: {
        name: 'Unisex Parf√ºml…ôr',
        description: 'H…ôm ki≈üil…ôr, h…ôm d…ô qadƒ±nlar √º√ß√ºn uyƒüun parf√ºml…ôr',
        image: 'https://images.unsplash.com/photo-1541643600914-78b084683601?w=400&h=400&fit=crop'
      }
    }),
    prisma.category.upsert({
      where: { name: 'Mini Parf√ºml…ôr' },
      update: {},
      create: {
        name: 'Mini Parf√ºml…ôr',
        description: 'Ki√ßik h…ôcmd…ô parf√ºml…ôr',
        image: 'https://images.unsplash.com/photo-1587017539504-67cfbddac569?w=400&h=400&fit=crop'
      }
    })
  ])

  console.log('‚úÖ Categories created')

  // Create products
  const products = await Promise.all([
    prisma.product.upsert({
      where: { sku: 'CHN-001' },
      update: {},
      create: {
        name: 'Chanel N¬∞5 Eau de Parfum',
        description: 'Chanel N¬∞5 Eau de Parfum is the world\'s most famous fragrance. A timeless classic that embodies the essence of luxury and femininity.',
        price: 299.99,
        salePrice: 249.99,
        images: 'https://images.unsplash.com/photo-1588405748880-12d1d1a6f6a9?w=600&h=600&fit=crop',
        inStock: true,
        stockCount: 15,
        sku: 'CHN-001',
          brandId: null,
        volume: '100ml',
        categoryId: categories[1].id // Qadƒ±n Parf√ºml…ôri
      }
    }),
    prisma.product.upsert({
      where: { sku: 'DIR-002' },
      update: {},
      create: {
        name: 'Dior Sauvage Eau de Toilette',
        description: 'Dior Sauvage is a fresh and powerful fragrance that captures the spirit of wide-open spaces.',
        price: 189.99,
        images: 'https://images.unsplash.com/photo-1592945403244-b3faa74b2c9a?w=600&h=600&fit=crop',
        inStock: true,
        stockCount: 25,
        sku: 'DIR-002',
          brandId: null,
        volume: '100ml',
        categoryId: categories[0].id // Ki≈üi Parf√ºml…ôri
      }
    }),
    prisma.product.upsert({
      where: { sku: 'YSL-003' },
      update: {},
      create: {
        name: 'Yves Saint Laurent Black Opium',
        description: 'Black Opium is an addictive gourmand fragrance with notes of coffee, vanilla, and white flowers.',
        price: 159.99,
        salePrice: 129.99,
        images: 'https://images.unsplash.com/photo-1587017539504-67cfbddac569?w=600&h=600&fit=crop',
        inStock: true,
        stockCount: 20,
        sku: 'YSL-003',
        brandId: null,
        volume: '90ml',
        categoryId: categories[1].id // Qadƒ±n Parf√ºml…ôri
      }
    }),
    prisma.product.upsert({
      where: { sku: 'TF-004' },
      update: {},
      create: {
        name: 'Tom Ford Tobacco Vanille',
        description: 'A modern take on an old-world men\'s club. A smooth oriental, vanilla-based fragrance.',
        price: 399.99,
        images: 'https://images.unsplash.com/photo-1588405748880-12d1d1a6f6a9?w=600&h=600&fit=crop',
        inStock: true,
        stockCount: 8,
        sku: 'TF-004',
          brandId: null,
        volume: '100ml',
        categoryId: categories[2].id // Unisex Parf√ºml…ôr
      }
    }),
    prisma.product.upsert({
      where: { sku: 'JML-005' },
      update: {},
      create: {
        name: 'Jo Malone London Wood Sage & Sea Salt',
        description: 'Escape the everyday along the windswept shore. Waves breaking white, the air fresh with sea salt and spray.',
        price: 129.99,
        images: 'https://images.unsplash.com/photo-1541643600914-78b084683601?w=600&h=600&fit=crop',
        inStock: true,
        stockCount: 30,
        sku: 'JML-005',
        brandId: null,
        volume: '100ml',
        categoryId: categories[2].id // Unisex Parf√ºml…ôr
      }
    }),
    prisma.product.upsert({
      where: { sku: 'VER-006' },
      update: {},
      create: {
        name: 'Versace Eros Eau de Toilette',
        description: 'A fresh, sensual fragrance with a luminous, intense structure that gives way to a Mediterranean character.',
        price: 89.99,
        salePrice: 69.99,
        images: 'https://images.unsplash.com/photo-1592945403244-b3faa74b2c9a?w=600&h=600&fit=crop',
        inStock: true,
        stockCount: 18,
        sku: 'VER-006',
          brandId: null,
        volume: '100ml',
        categoryId: categories[0].id // Ki≈üi Parf√ºml…ôri
      }
    })
  ])

  console.log('‚úÖ Products created')

  // Create sliders
  const sliders = await Promise.all([
    prisma.slider.upsert({
      where: { id: 'slider-1' },
      update: {},
      create: {
        id: 'slider-1',
        title: 'Yeni Koleksiya',
        subtitle: '2024-c√º ilin …ôn yax≈üƒ± parf√ºml…ôri',
        description: 'D√ºnyanƒ±n …ôn m…ô≈ühur brendl…ôrinin yeni parf√ºml…ôrini k…ô≈üf edin',
        image: 'https://images.unsplash.com/photo-1588405748880-12d1d1a6f6a9?w=1200&h=600&fit=crop',
        link: '/products',
        buttonText: 'ƒ∞ndi Alƒ±≈ü-Veri≈ü Et',
        isActive: true,
        order: 1
      }
    }),
    prisma.slider.upsert({
      where: { id: 'slider-2' },
      update: {},
      create: {
        id: 'slider-2',
        title: 'Endiriml…ôr',
        subtitle: '50%-…ô q…ôd…ôr endirim',
        description: 'Sevimli parf√ºml…ôrinizi daha s…ôrf…ôli qiym…ôt…ô …ôld…ô edin',
        image: 'https://images.unsplash.com/photo-1592945403244-b3faa74b2c9a?w=1200&h=600&fit=crop',
        link: '/products?sale=true',
        buttonText: 'Endiriml…ôri G√∂r',
        isActive: true,
        order: 2
      }
    }),
    prisma.slider.upsert({
      where: { id: 'slider-3' },
      update: {},
      create: {
        id: 'slider-3',
        title: 'Chanel Koleksiyasƒ±',
        subtitle: 'Klassik z…ôriflik',
        description: 'Chanel-in …ôn m…ô≈ühur parf√ºml…ôrini k…ô≈üf edin',
        image: 'https://images.unsplash.com/photo-1587017539504-67cfbddac569?w=1200&h=600&fit=crop',
        link: '/products?search=chanel',
        buttonText: 'Chanel Parf√ºml…ôri',
        isActive: true,
        order: 3
      }
    })
  ])

  console.log('‚úÖ Sliders created')

  // Create sample users with hashed passwords
  const users = await Promise.all([
    prisma.user.upsert({
      where: { email: 'admin@sahibparfumeriya.az' },
      update: {},
      create: {
        email: 'admin@sahibparfumeriya.az',
        name: 'Admin',
        password: await bcrypt.hash('admin123', 12),
        role: 'ADMIN'
      }
    }),
    prisma.user.upsert({
      where: { email: 'user@example.com' },
      update: {},
      create: {
        email: 'user@example.com',
        name: 'Test User',
        password: await bcrypt.hash('user123', 12),
        role: 'USER'
      }
    })
  ])

  console.log('‚úÖ Users created')

  // Create sample reviews
  const reviews = await Promise.all([
    prisma.review.upsert({
      where: { 
        userId_productId: {
          userId: users[1].id,
          productId: products[0].id
        }
      },
      update: {},
      create: {
        rating: 5,
        comment: 'M√ºk…ômm…ôl parf√ºm! √áox uzun m√ºdd…ôt davam edir.',
        userId: users[1].id,
        productId: products[0].id
      }
    }),
    prisma.review.upsert({
      where: { 
        userId_productId: {
          userId: users[1].id,
          productId: products[1].id
        }
      },
      update: {},
      create: {
        rating: 4,
        comment: 'G√∂z…ôl qoxu, amma qiym…ôti bir az y√ºks…ôkdir.',
        userId: users[1].id,
        productId: products[1].id
      }
    })
  ])

  console.log('‚úÖ Reviews created')

  // Create sample blog posts
  const blogs = await Promise.all([
    prisma.blog.upsert({
      where: { slug: 'parfum-secimi-ucun-tovsiyeler' },
      update: {},
      create: {
        title: 'Parf√ºm Se√ßimi √ú√ß√ºn T√∂vsiy…ôl…ôr',
        slug: 'parfum-secimi-ucun-tovsiyeler',
        excerpt: 'D√ºzg√ºn parf√ºm se√ßm…ôk √º√ß√ºn …ôsas m…ôsl…ôh…ôtl…ôr v…ô t√∂vsiy…ôl…ôr',
        content: `Parf√ºm se√ßm…ôk h…ôm maraqlƒ±, h…ôm d…ô √ß…ôtin bir prosesdir. D√ºzg√ºn parf√ºm se√ßm…ôk √º√ß√ºn a≈üaƒüƒ±dakƒ± m…ôsl…ôh…ôtl…ôri n…ôz…ôr…ô alƒ±n:

1. **D…ôrinizi Tanƒ±yƒ±n**: H…ôr insanƒ±n d…ôrisi f…ôrqlidir v…ô parf√ºml…ôr f…ôrqli ≈ü…ôkild…ô reaksiya verir.

2. **M√∂vs√ºm√º N…ôz…ôr…ô Alƒ±n**: Yay aylarƒ±nda daha y√ºng√ºl, qƒ±≈ü aylarƒ±nda is…ô daha aƒüƒ±r parf√ºml…ôr se√ßin.

3. **Test Edin**: Parf√ºm alƒ±≈ü-veri≈üi etm…ôzd…ôn …ôvv…ôl onu d…ôrinizd…ô test edin v…ô …ôn azƒ± 30 d…ôqiq…ô g√∂zl…ôyin.

4. **Notlarƒ± √ñyr…ônin**: Parf√ºm√ºn …ôsas notlarƒ±nƒ± √∂yr…ôn…ôr…ôk, sevdiyiniz qoxularƒ± m√º…ôyy…ôn edin.

5. **Qiym…ôt…ô Diqq…ôt Edin**: H…ômi≈ü…ô …ôn bahalƒ± parf√ºm …ôn yax≈üƒ± deyil. Sizin √º√ß√ºn uyƒüun olanƒ± tapƒ±n.`,
        image: 'https://images.unsplash.com/photo-1588405748880-12d1d1a6f6a9?w=800&h=400&fit=crop',
        isPublished: true,
        publishedAt: new Date()
      }
    }),
    prisma.blog.upsert({
      where: { slug: 'parfum-notlari-ve-aromalar' },
      update: {},
      create: {
        title: 'Parf√ºm Notlarƒ± v…ô Aromalar',
        slug: 'parfum-notlari-ve-aromalar',
        excerpt: 'Parf√ºml…ôrd…ô istifad…ô olunan …ôsas notlar v…ô aromalar haqqƒ±nda m…ôlumat',
        content: `Parf√ºml…ôr √º√ß …ôsas not qrupundan ibar…ôtdir:

**√úst Notlar (Top Notes)**
- ƒ∞lk 15-30 d…ôqiq…ôd…ô hiss olunan qoxular
- √áox vaxt sitrus, √ßi√ß…ôk v…ô ya y√ºng√ºl meyv…ô notlarƒ±
- N√ºmun…ôl…ôr: limon, portaqal, lavanda

**Orta Notlar (Middle Notes)**
- Parf√ºm√ºn …ôsas xarakterini m√º…ôyy…ôn ed…ôn notlar
- 30 d…ôqiq…ôd…ôn 2 saata q…ôd…ôr davam edir
- N√ºmun…ôl…ôr: g√ºl, yas…ôm…ôn, vanil

**Baza Notlar (Base Notes)**
- Parf√ºm√ºn …ôsasƒ±nƒ± t…ô≈ükil ed…ôn, …ôn uzun davam ed…ôn notlar
- 2 saatdan √ßox davam edir
- N√ºmun…ôl…ôr: aƒüac, m√º≈ük, amber

Bu notlarƒ±n uyƒüun birl…ô≈üm…ôsi parf√ºm√ºn unikal xarakterini yaradƒ±r.`,
        image: 'https://images.unsplash.com/photo-1592945403244-b3faa74b2c9a?w=800&h=400&fit=crop',
        isPublished: true,
        publishedAt: new Date()
      }
    }),
    prisma.blog.upsert({
      where: { slug: 'parfum-saxlama-ve-qoruma' },
      update: {},
      create: {
        title: 'Parf√ºm Saxlama v…ô Qoruma',
        slug: 'parfum-saxlama-ve-qoruma',
        excerpt: 'Parf√ºml…ôrinizi d√ºzg√ºn saxlamaq v…ô uzun m√ºdd…ôt qorumaq √º√ß√ºn t√∂vsiy…ôl…ôr',
        content: `Parf√ºml…ôrinizi d√ºzg√ºn saxlamaq onlarƒ±n keyfiyy…ôtini v…ô davamlƒ±lƒ±ƒüƒ±nƒ± artƒ±rƒ±r:

**Saxlama Yerl…ôri**
- S…ôrin v…ô quru yerl…ôrd…ô saxlayƒ±n
- Birba≈üa g√ºn…ô≈ü i≈üƒ±ƒüƒ±ndan uzaq tutun
- H…ôrar…ôt d…ôyi≈üiklikl…ôrind…ôn qoruyun

**Qoruma T…ôdbirl…ôri**
- Qapaƒüƒ± sƒ±x baƒülayƒ±n
- Sprey ba≈ülƒ±ƒüƒ±nƒ± t…ômiz saxlayƒ±n
- Uzun m√ºdd…ôt istifad…ô etm…ôdikd…ô ara-sƒ±ra √ßalƒ±≈üdƒ±rƒ±n

**M√ºdd…ôt**
- A√ßƒ±lmamƒ±≈ü parf√ºml…ôr 3-5 il saxlanƒ±r
- A√ßƒ±lmƒ±≈ü parf√ºml…ôr 2-3 il istifad…ô edil…ô bil…ôr
- Qoxu d…ôyi≈üibs…ô istifad…ô etm…ôyin

**S…ôhvl…ôr**
- Banyoda saxlamayƒ±n
- Ma≈üƒ±nda qoymayƒ±n
- Dondurucuda saxlamaƒüa ehtiyac yoxdur`,
        image: 'https://images.unsplash.com/photo-1587017539504-67cfbddac569?w=800&h=400&fit=crop',
        isPublished: true,
        publishedAt: new Date()
      }
    })
  ])

  console.log('‚úÖ Blog posts created')

  console.log('üéâ Database seeding completed!')
}

main()
  .catch((e) => {
    console.error('‚ùå Error during seeding:', e)
    process.exit(1)
  })
  .finally(async () => {
    await prisma.$disconnect()
  })
